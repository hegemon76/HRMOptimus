<div class="header">
  <span>Edytuj czas pracy</span>
  <button class="back" routerLink="/worktime"><i class="fas fa-times"></i></button>
</div>
<div class="workday-wrapper">


  <div class="day-info">
    <p><span>Pracownik:</span> {{user.fullName}}</p>
    <p><span>Dzie≈Ñ:</span> {{ id }} </p>
    <p><span>Godziny pracy:</span> 08:00 - 16:00 </p>
    <p><span>Czas pracy:</span> {{durationTime | date:'hh:mm'}} </p>
  </div>

  <div class="addingLegend">
    <p>Dodaj wpis</p>
  </div>

  <div class="times constForm">
    <form [formGroup]="form" action="">
      <mat-form-field class="example-form-field hoursFrom" appearance="outline">
        <mat-label>Godz. od</mat-label>
        <input id="center" matInput formControlName="workStart" type="text">
      </mat-form-field>
      <mat-form-field class="example-form-field hoursTo" appearance="outline">
        <mat-label>Godz. do</mat-label>
        <input id="center" matInput formControlName="workEnd" type="text">
      </mat-form-field>
      <mat-form-field appearance="outline" class="type">
        <mat-label>Tryb</mat-label>
        <mat-select id="center" formControlName="typeName">
          <mat-option value="zdalna">Praca zdalna</mat-option>
          <mat-option value="biuro">Praca w biurze</mat-option>
        </mat-select>
      </mat-form-field>
      <mat-form-field appearance="outline" class="project">
        <mat-label>Projekt</mat-label>
        <mat-select id="center" formControlName="projectName">
          <mat-option *ngFor="let project of projects" [value]="project">
            {{project.name}}</mat-option>
        </mat-select>
      </mat-form-field>
      <mat-form-field class="example-full-width" appearance="outline" class="details">
        <mat-label>Opis</mat-label>
        <input id="center" matInput formControlName="dayName" value="">
      </mat-form-field>
    </form>
    <button class="addEntry" id="{{ id }}" (click)="addEntry()">Dodaj
    </button>
  </div>
  <div class="addingLegend">
    <p>Edytuj wpisy</p>
  </div>
  <div #parent></div>
  <div class="times" *ngFor="let day of workDays">
    <form id="{{day.id}}" [formGroup]="form" action="" (input)="checkForChanges()"
      [ngClass]="{'visibleButton': this.form.dirty}">
      <mat-form-field class="example-form-field hoursFrom" appearance="outline">
        <mat-label>Godz. od</mat-label>
        <input matInput id="center" formControlName="workStart" type="text" value="{{day.workStart | date:'hh:mm'}}">
      </mat-form-field>
      <mat-form-field class="example-form-field hoursTo" appearance="outline">
        <mat-label>Godz. do</mat-label>
        <input matInput id="center" formControlName="workEnd" type="text" value="{{day.workStop | date:'hh:mm'}}">
      </mat-form-field>
      <mat-form-field appearance="outline" class="type">
        <mat-label>Tryb</mat-label>
        <mat-select id="center" formControlName="typeName" (selectionChange)="checkForChanges()">
          <mat-option value="zdalna">Praca zdalna</mat-option>
          <mat-option value="biuro">Praca w biurze</mat-option>
        </mat-select>
      </mat-form-field>
      <mat-form-field appearance="outline" class="project">
        <mat-label>Projekt</mat-label>
        <mat-select id="center" formControlName="projectName" [(value)]=" day.selected"
          (selectionChange)="checkForChanges()">
          <mat-option *ngFor="let project of projects" [value]="project.name">
            {{project.name}}</mat-option>
        </mat-select>
      </mat-form-field>
      <mat-form-field class="example-full-width" appearance="outline" class="details"
        [ngStyle]="{'width' : saveChanges ? '360px' : '455px'}">
        <mat-label>Opis</mat-label>
        <input id="center" formControlName="dayName" matInput value="{{day.name}}">
      </mat-form-field>
      <button class="save" (click)="updateWorkdayEntry($event)" id="{{day.id}}">Zapisz</button>
    </form>
    <button (click)="deleteWorkDayEntry(day.id)" class="deleteEntry"><i class="fas fa-times"></i>
    </button>
  </div>
</div>
